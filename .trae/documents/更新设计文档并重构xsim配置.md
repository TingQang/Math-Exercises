# 更新设计文档并重构xsim配置

## 1. 更新设计文档

### 1.1 修正技术架构部分

* 将核心依赖从exercise宏包改为xsim宏包

* 更新xsim宏包的配置说明，使用正确的参数和语法

* 移除不支持的参数和配置

* 添加exercise/within=subsection的配置说明

### 1.2 修正核心功能设计

* 更新xsim配置，使用exercise对应「题型」，solution绑定答案

* 添加\printanswers批量显示答案的说明

* 删除自定义的超链接代码，改为xsim+hyperref原生实现

* 更新编号层级，实现「章节→小节→题型」的编号绑定

## 2. 重构项目代码

### 2.1 更新config/packages.tex

* 修正xsim宏包配置，使用正确的参数

* 添加exercise/within=subsection配置

* 移除不支持的参数（如format、levels、hyperlink等）

* 配置xsim模板，实现题型标题格式

### 2.2 更新config/commands.tex

* 确保\dz命令正确实现

* 检查其他数学命令是否正常工作

### 2.3 更新content/ch02.tex

* 确保使用正确的xsim语法

* 检查Exercise和Answer环境的使用

* 确保\printanswers命令正确使用

### 2.4 统一编译配置

* 更新Makefile，确保只使用latexmk编译

* 更新VSCode设置，使用latexmk编译

* 确保所有配置文件使用统一的编译命令

### 2.5 修复tikz功能

* 确保tikz宏包正确加载

* 检查tikz功能是否正常工作

## 3. 测试和验证

### 3.1 编译测试

* 使用latexmk编译整个文档

* 检查是否有编译错误

* 验证xsim功能是否正常工作

### 3.2 功能测试

* 验证超链接功能是否正常

* 验证\printanswers命令是否正确显示答案

* 验证题型编号是否正确（章节→小节→题型）

* 验证\dz命令是否正确工作

### 3.3 视觉验证

* 检查文档排版是否正确

* 检查题型标题格式是否符合要求

* 检查答案显示是否正确

## 4. 清理和优化

### 4.1 清理不必要的文件

* 删除不再使用的测试文件

* 清理编译临时文件

### 4.2 优化配置

* 优化xsim配置，确保最佳性能

* 优化编译配置，提高编译效率

## 5. 最终验证

* 再次编译整个文档，确保所有功能正常

* 检查设计文档与实际代码是否一致

* 确保项目符合所有要求

