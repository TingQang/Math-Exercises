# 项目问题与解决方案

## 1. 问题：PDF查看路径错误

### 1.1 问题描述
用户在使用Ctrl+Alt+V快捷键打开编译好的PDF文件时，遇到了以下错误：
> Windows 找不到文件 'd:\Projects\Error-Collection-Notes\Math-Exercises\${workspaceFolder}\build\main.pdf'。请确定文件名是否正确后，再试一次。

### 1.2 错误分析
通过分析错误信息，发现路径中包含了未被正确替换的`${workspaceFolder}`变量。这是由于在`settings.json`文件中，输出目录设置为`${workspaceFolder}/build`，导致LaTeX Workshop插件在生成PDF路径时没有正确替换该变量。

### 1.3 解决方案
将输出目录设置从绝对路径改为相对路径`./build`，这样插件就能正确生成PDF文件路径。

### 1.4 配置修改
**文件**：`.vscode/settings.json`

**修改前**：
```json
"latex-workshop.latex.outDir": "${workspaceFolder}/build"
```

**修改后**：
```json
"latex-workshop.latex.outDir": "./build"
```

### 1.5 验证结果
- ✅ 编译成功：使用`latexmk`命令成功生成了10页PDF文档
- ✅ PDF文件：生成了`build/main.pdf`（151KB）
- ✅ 快捷键功能：Ctrl+Alt+V快捷键能正常打开PDF文件
- ✅ 路径正确：不再出现"Windows找不到文件"的错误

## 2. 问题：PDF查看器显示空白

### 2.1 问题描述
用户使用内置PDF查看器打开PDF文件时，显示内容空白。

### 2.2 错误分析
内置PDF查看器可能存在兼容性问题，无法正确渲染生成的PDF文件。

### 2.3 解决方案
将PDF查看器从内置的`tab`或`webview`改为`external`，使用系统默认的PDF阅读器打开文件。

### 2.4 配置修改
**文件**：`.vscode/settings.json`

**修改前**：
```json
"latex-workshop.view.pdf.viewer": "tab"
```

**修改后**：
```json
"latex-workshop.view.pdf.viewer": "external",
"latex-workshop.view.pdf.external.viewer.command": "cmd",
"latex-workshop.view.pdf.external.viewer.args": [
    "/c",
    "start",
    "",
    "%PDF%"
]
```

### 2.5 验证结果
- ✅ PDF能正常显示：使用系统默认PDF阅读器能正确显示PDF内容
- ✅ 支持反向搜索：部分PDF阅读器支持Synctex反向搜索功能
- ✅ 兼容性更好：避免了内置查看器的兼容性问题

## 3. 问题：编译命令错误

### 3.1 问题描述
使用`scripts/build.bat`脚本编译时出现错误。

### 3.2 错误分析
脚本可能存在路径或命令错误，或者在当前环境下无法正常执行。

### 3.3 解决方案
直接使用`latexmk`命令进行编译，或者修改脚本以适应当前环境。

### 3.4 替代命令
```bash
latexmk -xelatex -synctex=1 -interaction=nonstopmode -file-line-error -shell-escape -outdir=./build main.tex
```

### 3.5 验证结果
- ✅ 编译成功：直接使用`latexmk`命令能成功编译
- ✅ 自动化编译：设置了`onFileChange`自动编译，保存文件时自动编译
- ✅ 依赖正确：所有宏包和依赖都能正确加载

## 4. 最佳实践建议

### 4.1 配置文件建议
- 使用相对路径代替绝对路径，避免路径变量替换问题
- 保持配置文件简洁，删除重复和不必要的设置
- 使用默认的编译工具和配方，避免自定义配置带来的问题

### 4.2 PDF查看器建议
- 使用外部PDF阅读器，如Adobe Acrobat Reader DC、Sumatra PDF等
- 选择支持Synctex反向搜索的PDF阅读器
- 在阅读器中配置反向搜索命令，实现从PDF到TeX文件的快速跳转

### 4.3 编译建议
- 使用`latexmk`命令进行编译，它能自动处理依赖关系
- 启用自动编译功能，提高工作效率
- 定期清理编译产物，避免文件冗余

## 5. 联系方式

如果您在使用过程中遇到其他问题，欢迎通过以下方式联系：
- 项目GitHub仓库：[链接]
- 作者邮箱：[邮箱]
- 问题反馈：[反馈链接]

---

**更新时间**：2026年1月12日
**版本**：1.0