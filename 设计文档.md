# 考研数学一习题集与错题集LaTeX笔记设计文档

## 1. 项目概述

本项目是一个基于LaTeX的考研数学一习题集与错题集管理系统，采用"章节-小章节-题型-习题"的四级结构，实现题目按知识点精准归类、难度分级标注、来源追溯以及错题专项复盘。注意：题型数量是动态变化的，例如第一章可能有题型1-分段函数连续性判定、题型2-幂指函数的极限、题型3-复合函数的极限......

**设计风格**：采用简洁专业的习题集风格，专注于习题呈现，减少叙述性文字，实现美观的PDF输出，包括封面、目录、正文、附录和参考文献等完整结构。

## 1.1 130分+专项策略

### 1.1.1 分数目标分析
- **总分构成**：基础题(70分) + 中等题(45分) + 难题(15分) = 130分
- **能力要求**：掌握85%核心考点，重点题型得分率90%+
- **备考策略**：重点题型集群收集 + 错题专项突破 + 阶段性复习规划

### 1.1.2 重点题型集群
1. **极限计算**：等价无穷小、洛必达法则、夹逼准则（每年50+题）
2. **导数计算**：复合函数求导、高阶导数、隐函数求导（每年40+题）
3. **积分计算**：换元积分、分部积分、有理函数积分（每年45+题）
4. **矩阵运算**：特征值特征向量、相似对角化（每年35+题）
5. **概率计算**：全概率公式、贝叶斯公式、分布计算（每年40+题）

### 1.1.3 复习阶段规划
- **基础积累阶段**（前3个月）：重点题型系统练习，正确率达到90%
- **强化突破阶段**（中2个月）：错题专项突破，薄弱环节强化
- **冲刺提高阶段**（后1个月）：模拟考试，证明题能力提升

## 2. 技术架构

### 2.1 LaTeX环境配置
- **编译引擎**: XeLaTeX (最佳中文支持)
- **中文支持**: ctex宏包
- **图形绘制**: TikZ + shapes.geometric (星星绘制)
- **颜色管理**: xcolor宏包
- **页面布局**: geometry宏包

### 2.2 核心宏包依赖
```
ctex              % 中文支持
tcolorbox         % 彩色环境框
tikz              % 图形绘制
xcolor            % 颜色定义
enumitem          % 列表控制
hyperref          % 超链接
biblatex          % 参考文献
fancyhdr          % 页眉页脚
titlesec          % 标题格式
booktabs          % 表格样式
```

### 2.3 构建系统
- **构建目录**: build/ (存放所有编译中间文件)
- **输出文件**: main.pdf (最终PDF文档)
- **缓存管理**: .gitignore忽略编译产物
- **自动化构建**: 支持latexmk一键编译

## 3. 核心功能设计

### 3.1 难度标注系统
```latex
\newcommand{\difficulty}[1]{%
    \textcolor{difficulty-#1}{%
        \ifnum#1=1 \fullstar
        \else\ifnum#1=2 \fullstar\fullstar
        \else\ifnum#1=3 \fullstar\fullstar\fullstar
        \else\ifnum#1=4 \fullstar\fullstar\fullstar\fullstar
        \else\ifnum#1   \fullstar\fullstar\fullstar\fullstar\fullstar
        \fi\fi\fi\fi\fi
    }%
}
```
-难度标注在题目序号后，并且外部用中文中括号【】括住
- 支持1-5级难度
- 彩色星星可视化（绿色→黄色→橙色→红色→紫色渐变）
- 紧凑内联显示

### 3.2 习题信息标注
- `\exercisesource{来源}`: 题目来源标注
- `\matchexampoint{考点}`: 核心考点标注
- `\exercisetip{提示}`: 解题提示

### 3.3 专用环境
- `exam-point`: 考点环境（tcolorbox）
- `exercise`: 习题环境
- `solution`: 解析环境
- `error-analysis`: 错因分析环境
- `question-type`: 题型分类环境

## 4. 文件结构设计

```
Math-Exercises/
├── main.tex              # 主文档入口
├── preamble.tex          # 宏包配置与自定义命令
├── references.bib        # 参考文献数据库
├── README.md             # 项目使用说明
├── 设计文档.md           # 本文档
├── 考研数学一习题集与错题集LaTeX笔记需求分析.md  # 需求分析
├── chapters/             # 章节文件目录
│   ├── 00_preface.tex    # 前言
│   ├── ch00.tex          # 序言
│   ├── ch01.tex          # 第1章：极限与连续
│   ├── ch02.tex          # 第2章：一元函数微分学
│   ├── ch03.tex          # 第3章：一元函数积分学
│   ├── ch04.tex          # 第4章：多元函数微分学
│   ├── ch05.tex          # 第5章：重积分
│   ├── ch06.tex          # 第6章：级数
│   ├── ch07.tex          # 第7章：常微分方程
│   ├── ch08.tex          # 第8章：线性代数
│   ├── ch09.tex          # 第9章：概率论基础
│   ├── ch10.tex          # 第10章：数理统计
│   └── ch99.tex          # 附录与错题集
├── figures/              # 图片资源
│   ├── common/           # 通用图片
│   └── ch01/             # 第1章图片
└── build/                # 编译中间文件和缓存目录
    ├── main.pdf          # 生成的PDF文档
    ├── main.aux          # LaTeX辅助文件
    ├── main.bbl          # BibTeX参考文献文件
    ├── main.blg          # BibTeX日志文件
    ├── main.log          # LaTeX编译日志
    ├── main.toc          # 目录文件
    ├── main.out          # 超链接信息文件
    └── *.bcf, *.run.xml, *.synctex.gz 等其他中间文件
├── .vscode/              # VS Code配置目录
│   └── settings.json     # LaTeX Workshop插件配置
└── scripts/              # 构建脚本目录
    ├── build.sh          # Linux/Mac构建脚本
    ├── build.bat         # Windows构建脚本
    └── validate.sh       # 编译验证脚本

## 6. VS Code开发环境配置

### 6.1 LaTeX Workshop插件配置

项目使用`.vscode/settings.json`配置LaTeX Workshop插件，实现自动化编译和预览：

```jsonc
{
    "latex-workshop.latex.tools": [
        {
            "name": "latexmk",
            "command": "latexmk",
            "args": [
                "-xelatex",
                "-synctex=1",
                "-interaction=nonstopmode",
                "-file-line-error",
                "-shell-escape",
                "-outdir=./build",
                "%DOC%"
            ]
        }
    ],
    
    "latex-workshop.latex.recipes": [
        {
            "name": "latexmk",
            "tools": ["latexmk"]
        }
    ],
    
    "latex-workshop.latex.autoBuild.run": "onSave",
    "latex-workshop.latex.clean.fileTypes": [
        "*.aux", "*.bbl", "*.blg", "*.bcf", "*.run.xml",
        "*.synctex.gz", "*.log", "*.out", "*.toc",
        "*.lof", "*.lot", "*.fmt", "*.fot", "*.fdb_latexmk", "*.fls"
    ],
    
    // ============ 关键配置 ============
    "latex-workshop.view.pdf.viewer": "tab",  // 使用内置查看器
    "latex-workshop.view.pdf.internal.synctex.keybinding": "double-click",
    "latex-workshop.view.pdf.internal.click": true,
    "latex-workshop.view.pdf.internal.dblclick": true,
    "latex-workshop.view.pdf.internal.ctrlclick": false,
    
    // 同步配置
    "latex-workshop.synctex.afterBuild.enabled": true,
    "latex-workshop.synctex.path": "synctex",
    
    // 输出目录
    "latex-workshop.latex.outDir": "./build",
    
    // 性能优化
    "latex-workshop.latex.watch.files.ignore": [
        "**/build/**",
        "**/.git/**"
    ],
    
    // 拼写检查词典
    "cSpell.words": [
        "amsthm", "biber", "biblatex", "breaklines", "Consolas",
        "gbpub", "htbp", "kaoyan", "latexmk", "lstlisting",
        "lstset", "pdfauthor", "pdfsubject", "stringstyle",
        "synctex", "tcolorbox", "xelatex"
    ],
    
    // LaTeX编辑器配置
    "[latex]": {
        "editor.wordWrapColumn": 80,
        "editor.wordWrap": "bounded",
        "editor.rulers": [80]
    }
}
```

### 6.2 配置说明

- **编译工具**: 使用latexmk + XeLaTeX引擎，支持中文显示
- **输出目录**: 所有编译产物输出到`./build`目录
- **自动构建**: 保存文件时自动编译
- **PDF预览**: 内置标签页预览，支持双击同步定位
- **文件清理**: 自动清理编译中间文件
- **性能优化**: 忽略build目录和.git目录的文件监控
```

## 5. 章节组织规范

### 5.1 章节命名规则
- `ch00.tex`: 序言
- `ch01.tex-ch10.tex`: 正文章节
- `ch99.tex`: 附录

### 5.2 题型组织结构
每个章节按以下四级结构组织：
```latex
\chapter{章节名称}
\label{ch:label}

\section{小节名称}

\begin{exam-point}{考点名称}{标签}
考点说明
\end{exam-point}

\subsection{题型1 题型名称}
\begin{enumerate}[label={【\arabic*】}]
    \item 题目内容 \difficulty{难度级} \exercisesource{来源}
    \matchexampoint{考点}
    \exercisetip{提示}
\end{enumerate}

\subsection{题型2 题型名称}
\begin{enumerate}[label={【\arabic*】}]
    \item 题目内容 \difficulty{难度级} \exercisesource{来源}
    \matchexampoint{考点}
    \exercisetip{提示}
\end{enumerate}

\subsection{题型3 题型名称}
...
```

### 5.3 习题显示格式
- **序号**: 自动编号 (【1】【2】【3】...)
- **难度**: 彩色星星 (1-5个)
- **内容**: LaTeX数学公式
- **来源**: 方括号标注 [考研数学一·2018]
- **考点**: 匹配考点标注
- **提示**: 解题提示
```

### 5.3 习题格式规范
```latex
\begin{enumerate}[label={【\arabic*】}]
    \item 题目内容 \difficulty{难度级} \exercisesource{来源}
    \matchexampoint{考点}
    \exercisetip{提示}
\end{enumerate}
```

## 6. 错题集设计

### 6.1 错题结构
```latex
\begin{error-analysis}
\textbf{错因：} 错误原因分析

\textbf{错误解法：}
原错误解题过程

\textbf{正确解法：}
正确解题过程

\textbf{复盘状态：} 未复盘/已复盘N次/已掌握
\end{error-analysis}
```

### 6.2 组织方式
- 按原章节归类
- 支持交叉引用到原题
- 复盘状态标记

## 7. 样式设计

### 7.1 颜色方案
- 难度1: 绿色 (#009900)
- 难度2: 蓝色 (#0066CC)
- 难度3: 橙色 (#FF9900)
- 难度4: 红色 (#CC3300)
- 难度5: 紫色 (#660099)
- 星星: 金色 (#FFD700)

### 7.2 页面布局
- A4纸张
- 边距: 左3cm, 右2.5cm, 上2.5cm, 下2.5cm
- 页眉: 章节名 + 页码
- 页脚: 页码

### 7.3 字体规范
- 中文: 宋体
- 英文/数字: Times New Roman
- 数学公式: 默认LaTeX字体

## 8. 扩展性设计

### 8.1 新增章节
1. 在chapters/目录创建新tex文件
2. 在main.tex中添加\include语句
3. 遵循统一格式规范

### 8.2 新增题型
1. 使用question-type环境包装
2. 添加相应习题和解析

### 8.3 新增命令
在preamble.tex中添加自定义命令，遵循命名规范。

## 9. 编译与部署

### 9.1 编译流程
```bash
xelatex main.tex
biber main      # 如有参考文献
xelatex main.tex
xelatex main.tex
```

### 9.2 依赖检查
- MiKTeX/TeX Live 完整安装
- 中文支持包(ctex)
- 所有宏包已安装

## 10. 维护指南

### 10.1 版本控制
- 使用Git管理代码
- 定期备份
- 记录修改日志

### 10.2 错误排查
- 检查LaTeX语法
- 验证宏包依赖
- 查看编译日志

## 11. PDF模板与项目完善

### 11.1 基于exercises.pdf的模板设计
exercises.pdf作为项目模板，定义了完整的文档结构：
- **封面设计**: 标题、作者、版本信息
- **目录结构**: 自动生成目录、图表目录
- **正文格式**: 章节标题、页眉页脚
- **习题排版**: 序号、难度星星、来源标注
- **附录结构**: 参考文献、索引

### 11.2 项目完善计划
- [x] 实现四级结构化组织
- [x] 完成难度可视化系统
- [x] 建立构建和缓存管理系统
- [ ] 添加更多数学章节模板
- [ ] 实现错题专项复盘功能
- [ ] 增加习题答案和解析
- [ ] 优化移动端显示效果

### 11.3 扩展功能
- **自动化构建**: 集成latexmk脚本
- **版本管理**: Git工作流优化
- **内容验证**: LaTeX语法检查
- **多格式输出**: 支持HTML/PDF双输出

### 11.4 质量保证
- **编译验证**: 确保PDF正常生成
- **格式一致性**: 统一排版风格
- **内容完整性**: 章节结构完整
- **性能优化**: 减少编译时间

### 10.3 性能优化
- 图片压缩
- 代码清理
- 编译缓存

---

本文档基于需求分析制定，如有变更请同步更新。